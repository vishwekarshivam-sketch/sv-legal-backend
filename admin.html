<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SV Legal â€” Admin Dashboard</title>
<style>
    body{
        background:#0c0c0c;
        color:white;
        font-family:Arial, sans-serif;
        text-align:center;
    }
    h2{ margin-top:40px; font-size:26px; color:#ffcc00; letter-spacing:.5px;}
    table{
        margin:auto; width:90%; margin-top:25px; border-collapse:collapse;
        background:#111; color:white;
    }
    th,td{
        padding:12px; border-bottom:1px solid #222; text-align:center;
    }
    th{ background:#161616; color:#ffcc00; font-size:15px;}
    button{
        padding:8px 14px; background:#ffcc00; border:none; border-radius:4px;
        font-weight:bold; cursor:pointer;
    }
    button:hover{ opacity:.85;}
    #loginBox{
        margin-top:120px;
    }
    input{
        padding:8px 10px; width:260px; border-radius:4px; border:none;
        font-size:16px; outline:none;
    }
</style>
</head>

<body>

<h2>Admin Access</h2>

<div id="loginBox">
    <input type="password" id="adminPass" placeholder="Enter Admin Password">
    <br><br>
    <button onclick="adminLogin()">Login</button>
</div>

<div id="panel" style="display:none;">
    <h2>ðŸ“„ Incoming Requests</h2>

    <button onclick="loadData()">Refresh</button>
    <br><br>

    <table id="reqTable">
        <tr>
            <th>Name</th>
            <th>Form Type</th>
            <th>Mobile</th>
            <th>Date</th>
            <th>Document</th>
            <th>Status</th>
        </tr>
    </table>
</div>

<script>
const API = "https://sv-legal-backend-production.up.railway.app"; // LIVE SERVER âœ”

function adminLogin(){
    let pass = document.getElementById("adminPass").value;
    if(pass !== "sunil@svlegal"){ return alert("Wrong Password âŒ"); }

    localStorage.setItem("sv_admin", "1");
    document.getElementById("loginBox").style.display="none";
    document.getElementById("panel").style.display="block";
    loadData();
}

window.onload = ()=>{
    if(localStorage.getItem("sv_admin")=="1"){
        document.getElementById("loginBox").style.display="none";
        document.getElementById("panel").style.display="block";
        loadData();
    }
};

async function loadData(){
    try{
        const res = await fetch(`${API}/admin/requests`);
        const data = await res.json();

        let rows="";
        data.forEach(x=>{
            rows+=`
                <tr>
                    <td>${x.name}</td>
                    <td>${x.formType}</td>
                    <td>${x.mobile}</td>
                    <td>${new Date(x.createdAt).toLocaleDateString()}</td>
                    <td><a style="color:#00eaff;" target="_blank" href="${API}/uploads/${x.file}">Open</a></td>
                    <td>${x.status || "Pending"}</td>
                </tr>`;
        });

        document.getElementById("reqTable").innerHTML =
            `<tr><th>Name</th><th>Form</th><th>Mobile</th><th>Date</th><th>Doc</th><th>Status</th></tr>` + rows;
    }
    catch(e){ alert("Backend Offline / API Blocked"); }
}
</script>
</body>
</html>
